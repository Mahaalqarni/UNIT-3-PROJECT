{% extends 'main/dashboard_base.html' %}
{% load static %}
{% block title %} TaskMinder {% endblock %}


{% block con2 %}

    <!-- Checkbox -->

<!-- <section>

checkbox 

        <label>
            <input type="checkbox" id="myCheckbox">
            <span id="myText">Text</span>
        </label>

</section> -->



    <nav class="navbar">
        <div class="container-fluid">
            <a href="{% url 'main:home_page' %}" class="navbar-brand">TaskMinder</a>
                <div class="search-bar">
                <input type="text" placeholder="Search...">
                <button type="submit" class="px-3">Go</button>
                </div>
        </div>
    </nav>

    <!-- SideBar  -->

    <div class="sidebar">
        <ul>
            <li>
            {% if request.user.is_authenticated %} 
              <a class="nav-link mt-5" href="{% url 'accounts:user_profile' request.user.username %}" style="color: rgb(149, 99, 69);">WELCOME<br>✦{{request.user.username }}✦</a>
            {% endif %}
            </li>
            <li><button class="btn mt-3"><a href="{% url 'main:home_page' %}">HOME</a></button></li>
            <li><button class="btn"><a href="#">PROJECTS</a></button></li>
            <li><button class="btn"><a href="#">MY TASKS</a></button></li>
            <li><button class="btn"><a href="#">CALENDAR</a></button></li>
            <hr class="m-3">
            <li><button class="btn logout"><a href="{% url 'accounts:logout_user' %}">LOGOUT</a></button></li>
        </ul>
    </div>


    <!-- Add Tasks  -->


    <section style="display: flex; justify-content: center; text-align: center;">
        <div>
            <h1>Task Manager</h1><br>
                <hr><br>

                <form id="taskForm" method="POST" action="{% url 'main:create_task' %}">
                    {% csrf_token %}
                <label for="taskTitle">Task Title</label>
                <input type="text" id="taskTitle" style="border-radius: 20px; padding: 5px 20px;" name="title" required>

                <label for="taskDeadline">Deadline</label>
                <input type="date" id="taskDeadline" style="border-radius: 20px; padding: 5px 20px;" name="due_date" required>

                <label for="taskDescription">Description</label>
                <textarea id="taskDescription" style="border-radius: 20px; text-align: center;" name="description"></textarea>

                <input type="submit" class="btn btn-warning" value="Add Task" >
                </form>
        </div>
    </section> 

    <section style="display: flex; justify-content: center; text-align: center;">
        <ul class="task-list">

        </ul>
    </section> 




    <section style="display: flex; justify-content: center; text-align: center;">
      <script>
        document.getElementById("taskForm").addEventListener("submit", function(event) {
          event.preventDefault();
    
          var taskTitle = document.getElementById("taskTitle").value;
          var taskDeadline = document.getElementById("taskDeadline").value;
    
          var taskItem = document.createElement("li");
          taskItem.classList.add("task-item");
    
          var taskText = document.createTextNode(taskTitle + " (Deadline: " + taskDeadline + ")");
          taskItem.appendChild(taskText);
    
          var deleteButton = document.createElement("button");
          deleteButton.innerHTML = "Delete";
          deleteButton.classList.add("btn", "btn-warning");
          deleteButton.addEventListener("click", function() {
            this.parentNode.remove();
          });
          taskItem.appendChild(deleteButton);
    
          document.querySelector(".task-list").appendChild(taskItem);
    
          document.getElementById("taskTitle").value = "";
          document.getElementById("taskDeadline").value = "";
        });
      </script>
    </section>
    

{% endblock %}